<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Valentine Week Interactive - Canvas Drawings</title>
    <style>
      body {
        background-color: #ffe6e6;
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
      }
      header {
        background-color: #ff4d4d;
        padding: 20px;
        color: white;
        font-size: 2em;
      }
      nav {
        background-color: #ff9999;
        padding: 10px;
      }
      nav ul {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
      }
      nav ul li {
        margin: 0 10px;
        cursor: pointer;
        padding: 5px 10px;
        background-color: #ffcccc;
        border-radius: 5px;
        transition: background-color 0.3s;
      }
      nav ul li:hover {
        background-color: #ffb3b3;
      }
      /* The animation container holds our canvas */
      #animationContainer {
        margin: 30px auto;
        width: 400px;
        height: 400px;
        position: relative;
        border: 1px solid #ccc;
      }
      .message {
        font-size: 1.5em;
        color: #ff1a1a;
        margin-top: 20px;
        opacity: 0;
        transition: opacity 1s;
      }
      .message.show {
        opacity: 1;
      }
      .not-allowed {
        font-size: 1.5em;
        color: #d63384;
        margin-top: 20px;
        animation: fadeIn 1s ease-in-out;
        white-space: pre-wrap;
      }
      @keyframes fadeIn {
        0% {
          opacity: 0;
          transform: scale(0.8);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }
      canvas {
        background-color: transparent;
      }
    </style>
  </head>
  <body>
    <header>Valentine Week Interactive</header>
    <nav>
      <ul>
        <li data-day="rose">Rose Day</li>
        <li data-day="propose">Propose Day</li>
        <li data-day="chocolate">Chocolate Day</li>
        <li data-day="teddy">Teddy Day</li>
        <li data-day="promise">Promise Day</li>
        <li data-day="hug">Hug Day</li>
        <li data-day="kiss">Kiss Day</li>
      </ul>
    </nav>
    <div id="animationContainer">
      <!-- A canvas element will be created here for each day’s animation -->
    </div>
    <div id="messageContainer" class="message"></div>

    <script>
      // Allowed dates and messages (date-check logic is still present but commented out in loadAnimation)
      const allowedDates = {
        rose: { month: 2, day: 7 },
        propose: { month: 2, day: 8 },
        chocolate: { month: 2, day: 9 },
        teddy: { month: 2, day: 10 },
        promise: { month: 2, day: 11 },
        hug: { month: 2, day: 12 },
        kiss: { month: 2, day: 13 },
      };
      const messages = {
        rose: "May your day bloom with love and beauty. Happy Rose Day!",
        propose: "Take my hand and be my love forever. Happy Propose Day!",
        chocolate:
          "Life is sweet, and so are you! Enjoy a sweet Chocolate Day!",
        teddy: "Sending you a cuddly hug filled with love. Happy Teddy Day!",
        promise: "I promise to love you more every day. Happy Promise Day!",
        hug: "Wrap yourself in a warm hug of love. Happy Hug Day!",
        kiss: "Sealed with a kiss, my love for you is endless. Happy Kiss Day!",
      };
      const notAllowedMessages = {
        rose: "Oh, darling, the roses are still resting in their bud.\nReturn on {month} {day} to witness their breathtaking bloom.",
        propose:
          "My sweet, love's promise waits patiently in the quiet of dawn.\nCome back on {month} {day} when hearts dare to declare their deepest desires.",
        chocolate:
          "The sweetness of our love deserves the perfect moment.\nJoin me on {month} {day} when chocolates melt like whispered kisses.",
        teddy:
          "Beloved, a cuddly teddy bear is tucking in for a gentle hug.\nReturn on {month} {day} for a warm cuddle that speaks of tender affection.",
        promise:
          "My dearest, promises are whispered under starlit skies.\nReturn on {month} {day} when our vows will dance in the moonlight.",
        hug: "Darling, an embrace as warm as summer awaits us.\nMeet me on {month} {day} when warm hugs wrap our souls in love.",
        kiss: "Oh, sweet love, the moment of our perfect kiss is nearing.\nAwait {month} {day} when our lips meet in a tender symphony.",
      };

      function capitalize(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
      }
      function getFormattedNotAllowedMessage(day) {
        const allowed = allowedDates[day];
        const monthNames = [
          "January",
          "February",
          "March",
          "April",
          "May",
          "June",
          "July",
          "August",
          "September",
          "October",
          "November",
          "December",
        ];
        const allowedMonthName = monthNames[allowed.month - 1];
        const template =
          notAllowedMessages[day] ||
          "Oh, my love, please return on " +
            allowedMonthName +
            " " +
            allowed.day +
            ".";
        return template
          .replace("{month}", allowedMonthName)
          .replace("{day}", allowed.day);
      }
      function typeText(element, text, delay = 50) {
        element.innerHTML = "";
        let i = 0;
        function type() {
          if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(type, delay);
          }
        }
        type();
      }
      function isAllowed(day) {
        const allowed = allowedDates[day];
        const today = new Date();
        const currentMonth = today.getMonth() + 1;
        const currentDate = today.getDate();
        return currentMonth === allowed.month && currentDate === allowed.day;
      }
      function showNotAllowedMessage(day) {
        const message = getFormattedNotAllowedMessage(day);
        const container = document.getElementById("animationContainer");
        container.innerHTML = "";
        const notAllowedDiv = document.createElement("div");
        notAllowedDiv.className = "not-allowed";
        container.appendChild(notAllowedDiv);
        typeText(notAllowedDiv, message, 50);
        document.getElementById("messageContainer").classList.remove("show");
      }
      function showMessage(day) {
        const messageDiv = document.getElementById("messageContainer");
        messageDiv.innerText = messages[day];
        messageDiv.classList.remove("show");
        void messageDiv.offsetWidth;
        messageDiv.classList.add("show");
      }

      // ==============================
      // Canvas Animation Functions
      // ==============================

      // Animate Rose: Draw a rose curve (using the polar rose equation) with a blooming effect.
      function animateRose(canvas) {
        let ctx = canvas.getContext("2d");
        let startTime = null;
        function loop(timestamp) {
          if (!startTime) startTime = timestamp;
          let elapsed = timestamp - startTime;
          let scale = 0.8 + 0.3 * Math.abs(Math.sin(elapsed / 500));
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.save();
          ctx.translate(canvas.width / 2, canvas.height / 2);
          ctx.scale(scale, scale);
          ctx.beginPath();
          let k = 4,
            a = 80;
          let first = true;
          for (let theta = 0; theta <= Math.PI * 2; theta += 0.01) {
            let r = a * Math.cos(k * theta);
            let x = r * Math.cos(theta);
            let y = r * Math.sin(theta);
            if (first) {
              ctx.moveTo(x, y);
              first = false;
            } else {
              ctx.lineTo(x, y);
            }
          }
          ctx.closePath();
          ctx.fillStyle = "red";
          ctx.fill();
          ctx.restore();
          requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
      }

      // Utility function to draw a heart shape on a canvas context.
      function drawHeart(ctx, x, y, size) {
        ctx.save();
        ctx.translate(x, y);
        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.bezierCurveTo(-size, -size, -size * 1.5, size / 3, 0, size);
        ctx.bezierCurveTo(size * 1.5, size / 3, size, -size, 0, 0);
        ctx.fillStyle = "red";
        ctx.fill();
        ctx.restore();
      }

      // Animate Heart for Propose Day: A beating heart.
      function animateHeart(canvas) {
        let ctx = canvas.getContext("2d");
        let startTime = null;
        function loop(timestamp) {
          if (!startTime) startTime = timestamp;
          let elapsed = timestamp - startTime;
          let scale = 1 + 0.2 * Math.sin(elapsed / 200);
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.save();
          ctx.translate(canvas.width / 2, canvas.height / 2 - 30);
          ctx.scale(scale, scale);
          drawHeart(ctx, 0, 0, 30);
          ctx.restore();
          requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
      }

      // Animate Chocolate: Draw falling “chocolates” as brown circles.
      function animateChocolate(canvas) {
        let ctx = canvas.getContext("2d");
        let chocolates = [];
        for (let i = 0; i < 5; i++) {
          chocolates.push({
            x: Math.random() * canvas.width,
            y: -Math.random() * canvas.height,
            speed: 1 + Math.random() * 2,
          });
        }
        function loop() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.fillStyle = "#663300";
          chocolates.forEach((choc) => {
            ctx.beginPath();
            ctx.arc(choc.x, choc.y, 10, 0, 2 * Math.PI);
            ctx.fill();
            choc.y += choc.speed;
            if (choc.y - 10 > canvas.height) {
              choc.y = -10;
              choc.x = Math.random() * canvas.width;
            }
          });
          requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
      }

      // Animate Teddy: Draw a simple teddy bear face with a bouncing effect.
      function animateTeddy(canvas) {
        let ctx = canvas.getContext("2d");
        let startTime = null;
        function drawTeddy(offsetY) {
          ctx.save();
          ctx.translate(canvas.width / 2, canvas.height / 2 + offsetY);
          // Head
          ctx.beginPath();
          ctx.arc(0, 0, 50, 0, 2 * Math.PI);
          ctx.fillStyle = "#996633";
          ctx.fill();
          // Ears
          ctx.beginPath();
          ctx.arc(-40, -40, 20, 0, 2 * Math.PI);
          ctx.arc(40, -40, 20, 0, 2 * Math.PI);
          ctx.fill();
          // Eyes
          ctx.fillStyle = "black";
          ctx.beginPath();
          ctx.arc(-20, -10, 5, 0, 2 * Math.PI);
          ctx.arc(20, -10, 5, 0, 2 * Math.PI);
          ctx.fill();
          // Nose
          ctx.beginPath();
          ctx.arc(0, 10, 8, 0, 2 * Math.PI);
          ctx.fill();
          ctx.restore();
        }
        function loop(timestamp) {
          if (!startTime) startTime = timestamp;
          let elapsed = timestamp - startTime;
          let offsetY = 10 * Math.sin(elapsed / 200);
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          drawTeddy(offsetY);
          requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
      }

      // Animate Promise: Floating hearts that rise from the bottom.
      function animatePromise(canvas) {
        let ctx = canvas.getContext("2d");
        let hearts = [];
        for (let i = 0; i < 3; i++) {
          hearts.push({
            x: canvas.width * (0.2 + i * 0.3),
            y: canvas.height,
            speed: 0.5 + Math.random(),
          });
        }
        function loop() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          hearts.forEach((heart) => {
            drawHeart(ctx, heart.x, heart.y, 15);
            heart.y -= heart.speed;
            if (heart.y < -15) {
              heart.y = canvas.height + 15;
            }
          });
          requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
      }

      // Animate Hug: Draw two semi-circular “hands” that move toward each other.
      function animateHug(canvas) {
        let ctx = canvas.getContext("2d");
        let startTime = null;
        function loop(timestamp) {
          if (!startTime) startTime = timestamp;
          let elapsed = timestamp - startTime;
          let offset = 20 * Math.sin(elapsed / 300);
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          ctx.save();
          ctx.translate(canvas.width / 2, canvas.height / 2);
          // Left hand: semi-circle facing right
          ctx.beginPath();
          ctx.arc(-50 - offset, 0, 30, Math.PI * 0.5, Math.PI * 1.5);
          ctx.fillStyle = "#ffcc99";
          ctx.fill();
          // Right hand: semi-circle facing left
          ctx.beginPath();
          ctx.arc(50 + offset, 0, 30, Math.PI * 1.5, Math.PI * 0.5, true);
          ctx.fill();
          ctx.restore();
          requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
      }

      // Animate Kiss: Draw a pair of “lips” that blink (change opacity).
      function animateKiss(canvas) {
        let ctx = canvas.getContext("2d");
        let startTime = null;
        function drawLips(opacity) {
          ctx.save();
          ctx.translate(canvas.width / 2, canvas.height / 2);
          ctx.globalAlpha = opacity;
          ctx.beginPath();
          ctx.moveTo(-30, 0);
          ctx.quadraticCurveTo(0, 30, 30, 0);
          ctx.quadraticCurveTo(0, -30, -30, 0);
          ctx.fillStyle = "#ff3366";
          ctx.fill();
          ctx.restore();
        }
        function loop(timestamp) {
          if (!startTime) startTime = timestamp;
          let elapsed = timestamp - startTime;
          let opacity = 0.75 + 0.25 * Math.sin(elapsed / 200);
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          drawLips(opacity);
          requestAnimationFrame(loop);
        }
        requestAnimationFrame(loop);
      }

      // ==============================
      // Load Animation Based on Selected Day
      // (Date-check logic is commented out for testing.)
      // ==============================
      function loadAnimation(day) {
        // Uncomment these lines to enable date restrictions:
        // if (!isAllowed(day)) {
        //   showNotAllowedMessage(day);
        //   return;
        // }
        const container = document.getElementById("animationContainer");
        container.innerHTML = "";
        const canvas = document.createElement("canvas");
        canvas.width = container.clientWidth;
        canvas.height = container.clientHeight;
        container.appendChild(canvas);
        switch (day) {
          case "rose":
            animateRose(canvas);
            break;
          case "propose":
            animateHeart(canvas);
            break;
          case "chocolate":
            animateChocolate(canvas);
            break;
          case "teddy":
            animateTeddy(canvas);
            break;
          case "promise":
            animatePromise(canvas);
            break;
          case "hug":
            animateHug(canvas);
            break;
          case "kiss":
            animateKiss(canvas);
            break;
          default:
            break;
        }
        document.getElementById("messageContainer").classList.remove("show");
      }

      // Set up navigation click events.
      document.querySelectorAll("nav ul li").forEach((item) => {
        item.addEventListener("click", function () {
          const day = this.getAttribute("data-day");
          loadAnimation(day);
        });
      });

      // On page load, display a welcome message.
      (function loadToday() {
        const container = document.getElementById("animationContainer");
        container.innerHTML =
          "<p class='not-allowed'>Welcome, dear! The magic of Valentine Week awaits. Please select a day to know more.</p>";
      })();
    </script>
  </body>
</html>
